{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\web11\\\\Desktop\\\\Realtor-Client\\\\realtorApp\\\\src\\\\componentsInUse\\\\apartment\\\\AddApartment.jsx\";\nimport React from 'react';\nimport { addApartmentToDB } from '../../data/apartments';\nimport { getCitiesByCountry } from '../../data/citiesByCountry';\nimport { uploadImages } from '../../data/images';\nimport ApartmentFilter from './ApartmentFilter';\nimport Cookies from 'js-cookie';\nimport './addapartmentStyle.css';\n\nclass AddApartment extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.fileUploadHandler = () => {\n      const fd = new FormData(); // console.log(\"before\", fd)\n      // console.log(\"before file_name\", this.state.file_name)\n\n      fd.append('files', this.state.file_name); // console.log(\"after file_name\", this.state.file_name)\n      // console.log(\"after\", fd)\n\n      this.sendingFiles(fd);\n    };\n\n    this.onCheck = async e => {\n      e.preventDefault();\n      const _this$state = this.state,\n            user_id = _this$state.user_id,\n            address = _this$state.address,\n            city_id = _this$state.city_id,\n            price = _this$state.price,\n            number_of_room = _this$state.number_of_room,\n            number_of_bath = _this$state.number_of_bath,\n            sqft = _this$state.sqft,\n            description = _this$state.description,\n            tem_main_image = _this$state.tem_main_image;\n      main_image = '/images/apartment/' + tem_main_image;\n      console.log(\"main_image after change\", main_image);\n      console.log(\"here\", {\n        user_id,\n        address,\n        city_id,\n        price,\n        number_of_room,\n        number_of_bath,\n        sqft,\n        description,\n        main_image\n      }); // try {\n\n      const apartment = await addApartmentToDB(user_id, address, city_id, price, number_of_room, number_of_bath, sqft, description, main_image);\n      console.log(\"after calling function\", apartment);\n      this.setState({\n        apartment\n      }); // }catch(error){\n      //     console.log(error)\n      // }\n    };\n\n    this.handleChange = e => {\n      e.preventDefault();\n      let _e$target = e.target,\n          name = _e$target.name,\n          value = _e$target.value;\n      console.log(\"name\", name);\n      console.log(\"value\", value);\n\n      if (name === \"tem_main_image\") {\n        console.log(\"main_image handlechange\", this.state.tem_main_image);\n        this.setState({\n          tem_main_image: e.target.files[0].name\n        });\n      } else if (name === \"country\") {\n        this.filterCity(value);\n      } else {\n        this.setState({\n          [name]: value\n        });\n      }\n    };\n\n    this.state = {\n      user: null,\n      apartment: null,\n      file_name: '',\n      valid: '',\n      message: '',\n      price: '',\n      user_id: '',\n      number_of_room: '',\n      number_of_bath: '',\n      sqft: '',\n      description: '',\n      tem_main_image: null,\n      cities: [],\n      city_id: '',\n      country: '',\n      listingStatus: ''\n    };\n  }\n\n  componentDidMount() {\n    let user = Cookies.get();\n    user = JSON.parse(user.auth);\n    this.setState({\n      user_id: user.id\n    });\n  } // handleChange = (e) => {\n  //     e.preventDefault();\n  //     let {name, value} = e.target;\n  //     this.setState({\n  //         [name]: value.toLowerCase(),\n  //     });\n  // };\n  // fileSelectedHandle = event =>{\n  //     this.setState({\n  //         file_name: event.target.files[0]\n  //     })\n  // }\n\n\n  async sendingFiles(fd) {\n    try {\n      const uploadImage = await uploadImages(fd);\n      console.log(\"uploadImage\", uploadImage);\n      this.setState({\n        files: uploadImage\n      });\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  async filterCity(id) {\n    try {\n      const cities = await getCitiesByCountry(id);\n      this.setState({\n        cities\n      });\n    } catch (error) {\n      console.log(error);\n    }\n  } // fileSelectedHandle = event =>{\n  //     this.setState({\n  //         file_name: event.target.files[0]\n  //     })\n  // }\n\n\n  render() {\n    console.log(\"main_image\", this.state.tem_main_image);\n    const mainStyle = {\n      width: \"1000px\",\n      height: \"450px\",\n      borderRadius: \"30px\",\n      textAlign: \"center\",\n      backgroundColor: \"rgba(65, 170, 162, .9)\",\n      top: \"120px\",\n      right: \"500px\"\n    };\n    const inputWrapper = {\n      paddingTop: \"20px\"\n    };\n    const inputStyle = {\n      borderRadius: \"5px\",\n      width: \"90%\",\n      fontSize: \"15px\"\n    }; // const {message, valid, apartment} = this.state;\n\n    console.log(\"user\", this.state.user);\n    return React.createElement(\"div\", {\n      className: \"addApartment\",\n      style: {\n        position: \"relative\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"container-fluid\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: mainStyle,\n      className: \"d-3 d-lg-inline col-md-offset-4 regForm\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      style: {\n        textAlign: \"center\",\n        paddingTop: \"30px\",\n        color: \"#ffffff\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }, \"Add Apartment\"), React.createElement(\"p\", {\n      className: \"wrap-text-div\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, \"Currently you can add aparatments only in Israel \"), React.createElement(\"div\", {\n      className: \"justify-content-between\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-4 col-md-6\",\n      style: inputWrapper,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      placeholder: \"address\",\n      name: \"address\",\n      style: inputStyle,\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"col-4 col-md-6\",\n      style: inputWrapper,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      placeholder: \"price\",\n      name: \"price\",\n      style: inputStyle,\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    })), React.createElement(ApartmentFilter, {\n      handleChange: this.handleChange,\n      cities: this.state.cities,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"col-4 col-md-6\",\n      style: inputWrapper,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      placeholder: \"Number of rooms\",\n      name: \"number_of_room\",\n      style: inputStyle,\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"col-4 col-md-6\",\n      style: inputWrapper,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      placeholder: \"Number of baths\",\n      name: \"number_of_bath\",\n      style: inputStyle,\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"col-4 col-md-6\",\n      style: inputWrapper,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      placeholder: \"Sqft\",\n      name: \"sqft\",\n      style: inputStyle,\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"col-4 col-md-6\",\n      style: inputWrapper,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      placeholder: \"Description\",\n      name: \"description\",\n      style: inputStyle,\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"d-flex col-4 col-md-5\",\n      style: inputWrapper,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"file\",\n      onChange: this.handleChange,\n      name: \"tem_main_image\",\n      style: {\n        display: \"none\"\n      },\n      ref: fileInput => this.fileInput = fileInput,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      style: {\n        backgroundColor: \"#ffffff\"\n      },\n      onClick: () => this.fileInput.click(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    }, \"Pick Image\"), React.createElement(\"button\", {\n      style: {\n        backgroundColor: \"#ffffff\"\n      },\n      onClick: this.fileUploadHandler,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      },\n      __self: this\n    }, \"Upload\")), React.createElement(\"button\", {\n      className: \"col-md-4 col-md-offset-4 btn\",\n      style: {\n        backgroundColor: \"#ffffff\",\n        color: \"#626a69\",\n        fontSize: \"20px\",\n        marginTop: \"20px\"\n      },\n      type: \"button\",\n      onClick: this.onCheck,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189\n      },\n      __self: this\n    }, \" Submit\"))))));\n  }\n\n}\n\nexport default AddApartment;","map":{"version":3,"sources":["C:/Users/web11/Desktop/Realtor-Client/realtorApp/src/componentsInUse/apartment/AddApartment.jsx"],"names":["React","addApartmentToDB","getCitiesByCountry","uploadImages","ApartmentFilter","Cookies","AddApartment","Component","constructor","props","fileUploadHandler","fd","FormData","append","state","file_name","sendingFiles","onCheck","e","preventDefault","user_id","address","city_id","price","number_of_room","number_of_bath","sqft","description","tem_main_image","main_image","console","log","apartment","setState","handleChange","target","name","value","files","filterCity","user","valid","message","cities","country","listingStatus","componentDidMount","get","JSON","parse","auth","id","uploadImage","error","render","mainStyle","width","height","borderRadius","textAlign","backgroundColor","top","right","inputWrapper","paddingTop","inputStyle","fontSize","position","color","display","fileInput","click","marginTop"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport {addApartmentToDB} from '../../data/apartments'\r\nimport {getCitiesByCountry} from '../../data/citiesByCountry'\r\nimport {uploadImages} from '../../data/images'\r\nimport ApartmentFilter from './ApartmentFilter'\r\nimport Cookies from 'js-cookie'\r\nimport './addapartmentStyle.css'\r\n\r\nclass AddApartment extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            user: null,\r\n            apartment: null,\r\n            file_name: '',\r\n            valid: '',\r\n            message: '',\r\n            price : '',\r\n            user_id: '',\r\n            number_of_room: '',\r\n            number_of_bath: '', \r\n            sqft: '',\r\n            description: '',\r\n            tem_main_image: null,\r\n            cities: [],\r\n            city_id: '',\r\n            country: '',\r\n            listingStatus: '',\r\n\r\n        };\r\n    }\r\n\r\n    componentDidMount(){\r\n        let user = Cookies.get();\r\n        user = JSON.parse(user.auth)\r\n        this.setState({\r\n            user_id: user.id\r\n        })\r\n    }\r\n\r\n    // handleChange = (e) => {\r\n    //     e.preventDefault();\r\n    //     let {name, value} = e.target;\r\n    //     this.setState({\r\n    //         [name]: value.toLowerCase(),\r\n    //     });\r\n    // };\r\n    // fileSelectedHandle = event =>{\r\n    //     this.setState({\r\n    //         file_name: event.target.files[0]\r\n    //     })\r\n    // }\r\n    \r\n    fileUploadHandler = () => {\r\n        const fd = new FormData();\r\n        // console.log(\"before\", fd)\r\n        // console.log(\"before file_name\", this.state.file_name)\r\n        fd.append('files', this.state.file_name)\r\n        // console.log(\"after file_name\", this.state.file_name)\r\n        // console.log(\"after\", fd)\r\n        this.sendingFiles(fd);\r\n    }\r\n\r\n    async sendingFiles(fd){\r\n        try {\r\n            const uploadImage = await uploadImages(fd);\r\n            console.log(\"uploadImage\",uploadImage)\r\n            this.setState({\r\n                files: uploadImage\r\n            })\r\n        } catch(error){\r\n            console.log(error)\r\n        }\r\n    }\r\n  \r\n    onCheck = async e => {\r\n        e.preventDefault();\r\n        const {user_id, address, city_id, price, number_of_room, number_of_bath, sqft, description, tem_main_image\r\n        } = this.state\r\n        main_image = '/images/apartment/' + tem_main_image\r\n        console.log(\"main_image after change\", main_image)\r\n        console.log(\"here\", {user_id, address, city_id, price, number_of_room, number_of_bath, sqft, description, main_image\r\n        })\r\n        // try {\r\n            const apartment = await addApartmentToDB(user_id, address, city_id, price, number_of_room, number_of_bath, sqft, description, main_image)\r\n            console.log(\"after calling function\", apartment)\r\n            this.setState({ \r\n                apartment\r\n            });\r\n        // }catch(error){\r\n        //     console.log(error)\r\n        // }\r\n    };  \r\n    async filterCity(id){\r\n        try{\r\n            const cities = await getCitiesByCountry(id)\r\n            this.setState({\r\n                cities\r\n            });\r\n        }catch(error){\r\n            console.log(error)\r\n        }\r\n    }\r\n    \r\n    // fileSelectedHandle = event =>{\r\n    //     this.setState({\r\n    //         file_name: event.target.files[0]\r\n    //     })\r\n    // }\r\n\r\n    handleChange = (e) => {\r\n        e.preventDefault();\r\n        let {name, value} = e.target;\r\n        console.log(\"name\", name)\r\n        console.log(\"value\", value)\r\n        if(name === \"tem_main_image\"){  \r\n            console.log(\"main_image handlechange\", this.state.tem_main_image)      \r\n            this.setState({\r\n                tem_main_image: e.target.files[0].name\r\n            })\r\n        }else if(name === \"country\"){        \r\n            this.filterCity(value);\r\n        } else {\r\n            this.setState({\r\n                [name]: value,\r\n            });\r\n        }\r\n    };\r\n\r\n    render() {\r\n        console.log(\"main_image\", this.state.tem_main_image)\r\n\r\n        const mainStyle = {width:\"1000px\", height:\"450px\", borderRadius: \"30px\", textAlign: \"center\", backgroundColor: \"rgba(65, 170, 162, .9)\", top: \"120px\", right:\"500px\"};\r\n        const inputWrapper = {paddingTop: \"20px\" };\r\n        const inputStyle = {borderRadius: \"5px\", width: \"90%\", fontSize: \"15px\"};\r\n        // const {message, valid, apartment} = this.state;\r\n        console.log(\"user\", this.state.user)\r\n        return(\r\n            <div className={\"addApartment\"} style={{position: \"relative\"}}>            \r\n                <div className={\"container-fluid\"}>\r\n                    <div className={\"row\"}>\r\n                        <div style={mainStyle} className={\"d-3 d-lg-inline col-md-offset-4 regForm\"}>\r\n                            <h1 style={{textAlign: \"center\", paddingTop: \"30px\", color: \"#ffffff\"}}>Add Apartment</h1>\r\n                            <p className={\"wrap-text-div\"}>\r\n                            Currently you can add aparatments only in Israel </p>\r\n\r\n                            <div className={\"justify-content-between\"}>\r\n                            <div className={\"col-4 col-md-6\"} style={inputWrapper}>\r\n                                <input type={\"text\"} className={\"form-control\"} \r\n                                    placeholder={\"address\"}\r\n                                    name={\"address\"}\r\n                                    style={inputStyle} onChange={this.handleChange}/>\r\n                            </div>\r\n                            <div className={\"col-4 col-md-6\"} style={inputWrapper}>\r\n                                <input type={\"text\"} className={\"form-control\"} \r\n                                    placeholder={\"price\"}\r\n                                    name={\"price\"}\r\n                                    style={inputStyle} onChange={this.handleChange}/>\r\n                            </div>\r\n                            <ApartmentFilter handleChange={this.handleChange}\r\n                                            cities={this.state.cities}/>\r\n\r\n                            <div className={\"col-4 col-md-6\"} style={inputWrapper}>\r\n                                <input type={\"text\"} className={\"form-control\"} placeholder={\"Number of rooms\"}\r\n                                    name={\"number_of_room\"} style={inputStyle} onChange={this.handleChange}/>\r\n                            </div>\r\n                            <div className={\"col-4 col-md-6\"} style={inputWrapper}>\r\n                                <input type={\"text\"} className={\"form-control\"} placeholder={\"Number of baths\"}\r\n                                    name={\"number_of_bath\"}\r\n                                    style={inputStyle} onChange={this.handleChange}/>\r\n                            </div>\r\n                            <div className={\"col-4 col-md-6\"} style={inputWrapper}>\r\n                                <input type={\"text\"} className={\"form-control\"} placeholder={\"Sqft\"}\r\n                                    name={\"sqft\"}\r\n                                    style={inputStyle} onChange={this.handleChange}/>\r\n                            </div>\r\n                            <div className={\"col-4 col-md-6\"} style={inputWrapper}>\r\n                                <input type={\"text\"} className={\"form-control\"} placeholder={\"Description\"}\r\n                                    name={\"description\"}\r\n                                    style={inputStyle} onChange={this.handleChange}/>\r\n                            </div>\r\n                            {/* <UploadImage handleChange={this.handleChange}  \r\n                                        main_image={this.state.main_image}/> */}\r\n                            <div className={\"d-flex col-4 col-md-5\"} style={inputWrapper}>\r\n                                <input type=\"file\" onChange={this.handleChange} name={\"tem_main_image\"} style={{display:\"none\"}} ref={fileInput => this.fileInput = fileInput}/>\r\n                                <button  style={{backgroundColor: \"#ffffff\"}} onClick={() =>this.fileInput.click()}>Pick Image</button>\r\n                                <button style={{backgroundColor: \"#ffffff\"}} onClick={this.fileUploadHandler}>Upload</button>\r\n                            </div>\r\n                            <button className={\"col-md-4 col-md-offset-4 btn\"}\r\n                                    style={{\r\n                                        backgroundColor: \"#ffffff\",\r\n                                        color: \"#626a69\",\r\n                                        fontSize: \"20px\",\r\n                                        marginTop: \"20px\"\r\n                                    }}\r\n                                    type={\"button\"} onClick={this.onCheck}> Submit\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n            \r\n        )\r\n    }\r\n}\r\n\r\nexport default AddApartment;\r\n\r\n\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}